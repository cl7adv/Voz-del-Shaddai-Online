<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voz del Shaddai Online - Emisora Tropical</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a2980, #26d0ce);
            color: #fff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 900px;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(255, 255, 255, 0.1);
            position: relative;
            z-index: 1;
        }

        header {
            background: linear-gradient(to right, #ff7e5f, #feb47b);
            padding: 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .radio-icon {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2rem;
            color: #fff;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .main-content {
            padding: 30px;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .player-section {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .player-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            width: 100%;
            flex-wrap: wrap;
        }

        .power-btn {
            background-color: #ff4757;
            border: none;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .power-btn:hover {
            background-color: #ff3838;
            transform: scale(1.05);
        }

        .power-btn.on {
            background-color: #2ed573;
            box-shadow: 0 0 20px rgba(46, 213, 115, 0.5);
        }

        .power-btn.on:hover {
            background-color: #26c46a;
        }

        .play-btn {
            background-color: #3742fa;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .play-btn:hover {
            background-color: #2980b9;
            transform: scale(1.05);
        }

        .next-btn {
            background-color: #ffa502;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .next-btn:hover {
            background-color: #e59400;
            transform: scale(1.05);
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 15px;
            width: 100%;
            max-width: 300px;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
        }

        .volume-control i {
            font-size: 1.5rem;
            color: #ffa502;
        }

        .volume-slider {
            flex-grow: 1;
            -webkit-appearance: none;
            appearance: none;
            height: 8px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            outline: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 22px;
            height: 22px;
            background: #ffa502;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        .now-playing {
            background: linear-gradient(to right, rgba(255, 165, 2, 0.2), rgba(255, 165, 2, 0.1));
            border-radius: 10px;
            padding: 20px;
            width: 100%;
            text-align: center;
            margin-top: 10px;
            border-left: 5px solid #ffa502;
        }

        .now-playing h3 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: #ffa502;
        }

        .song-title {
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .song-genre {
            font-style: italic;
            opacity: 0.9;
            color: #70a1ff;
        }

        .status-message {
            margin-top: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            font-size: 0.9rem;
        }

        .loading {
            display: none;
            font-style: italic;
            color: #70a1ff;
            margin-top: 10px;
        }

        .song-list-container {
            margin-top: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            max-height: 200px;
            overflow-y: auto;
        }

        .song-item {
            padding: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .song-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .song-item.active {
            background: rgba(255, 165, 2, 0.2);
            color: #ffa502;
        }

        .footer {
            text-align: center;
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.4);
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .tropical-decoration {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        .palm-leaf {
            position: absolute;
            font-size: 10rem;
            color: rgba(255, 255, 255, 0.05);
            transform: rotate(-30deg);
            top: 10%;
            right: -5%;
        }

        .flower {
            position: absolute;
            font-size: 8rem;
            color: rgba(255, 255, 255, 0.05);
            bottom: 10%;
            left: -5%;
            transform: rotate(20deg);
        }

        .sun {
            position: absolute;
            font-size: 12rem;
            color: rgba(255, 255, 255, 0.05);
            top: -5%;
            left: 10%;
        }

        .error {
            color: #ff4757;
            background: rgba(255, 71, 87, 0.1);
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            display: none;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            margin-top: 10px;
            overflow: hidden;
        }

        .progress {
            width: 0%;
            height: 100%;
            background: #ffa502;
            transition: width 0.3s;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
            }
            
            header h1 {
                font-size: 2rem;
            }
            
            .player-controls {
                flex-direction: column;
                gap: 15px;
            }
            
            .volume-control {
                max-width: 100%;
            }
            
            .song-title {
                font-size: 1.2rem;
            }
        }

        @keyframes playing {
            0% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 0.7; }
        }

        .playing-indicator {
            display: inline-block;
            margin-left: 10px;
            color: #ffa502;
            animation: playing 1.5s infinite;
        }
    </style>
</head>
<body>
    <div class="tropical-decoration">
        <div class="sun"><i class="fas fa-sun"></i></div>
        <div class="palm-leaf"><i class="fas fa-leaf"></i></div>
        <div class="flower"><i class="fas fa-spa"></i></div>
    </div>

    <div class="container">
        <header>
            <h1><i class="fas fa-broadcast-tower"></i> Voz del Shaddai Online</h1>
            <p>Tu emisora tropical con música directa desde GitHub</p>
            <div class="radio-icon">
                <i class="fas fa-music"></i>
            </div>
        </header>

        <div class="main-content">
            <div class="player-section">
                <div class="player-controls">
                    <button class="power-btn" id="powerBtn">
                        <i class="fas fa-power-off"></i>
                    </button>
                    
                    <button class="play-btn" id="playBtn">
                        <i class="fas fa-play"></i>
                    </button>
                    
                    <button class="next-btn" id="nextBtn" title="Siguiente canción aleatoria">
                        <i class="fas fa-random"></i>
                    </button>
                    
                    <div class="volume-control">
                        <i class="fas fa-volume-down"></i>
                        <input type="range" min="0" max="100" value="70" class="volume-slider" id="volumeSlider">
                        <i class="fas fa-volume-up"></i>
                    </div>
                </div>
                
                <div class="now-playing">
                    <h3><i class="fas fa-headphones"></i> Reproduciendo ahora:</h3>
                    <div class="song-title" id="currentSong">Esperando música...</div>
                    <div class="song-genre" id="currentGenre">-</div>
                    <div class="progress-bar">
                        <div class="progress" id="progressBar"></div>
                    </div>
                    <div class="loading" id="loading">Cargando música...</div>
                    <div class="error" id="errorMessage"></div>
                    <div class="status-message" id="statusMessage">
                        <i class="fas fa-info-circle"></i> Modo aleatorio activo
                    </div>
                </div>
                
                <div class="song-list-container">
                    <div id="songList">
                        <!-- Lista de canciones se generará aquí -->
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>Música desde: <a href="https://github.com/cl7adv/Voz-del-Shaddai-Online/tree/main/musica" target="_blank" style="color: #70a1ff; text-decoration: none;">GitHub Repository</a></p>
            <p><i class="fas fa-heart" style="color: #ff4757;"></i> Emisora Voz del Shaddai - Reproducción aleatoria</p>
        </div>
    </div>

    <script>
        // Lista de canciones DIRECTAMENTE desde tu repositorio de GitHub
        // Estas son URLs RAW reales que deberían funcionar
        const songs = [
            // Archivos de música desde tu repositorio
            {
                title: "Alabanza y Adoración 1",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Alabanza%20y%20Adoraci%C3%B3n%201.mp3",
                genre: "Alabanza"
            },
            {
                title: "Alabanza y Adoración 2",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Alabanza%20y%20Adoraci%C3%B3n%202.mp3",
                genre: "Alabanza"
            },
            {
                title: "Bendecid Su Nombre",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Bendecid%20Su%20Nombre.mp3",
                genre: "Alabanza"
            },
            {
                title: "Canto de Victoria",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Canto%20de%20Victoria.mp3",
                genre: "Gospel"
            },
            {
                title: "Celebrad a Cristo",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Celebrad%20a%20Cristo.mp3",
                genre: "Gospel"
            },
            {
                title: "Coritos 1",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Coritos%201.mp3",
                genre: "Coritos"
            },
            {
                title: "Coritos 2",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Coritos%202.mp3",
                genre: "Coritos"
            },
            {
                title: "Cuan Grande Es El",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Cuan%20Grande%20Es%20El.mp3",
                genre: "Himno"
            },
            {
                title: "Digno Es El Cordero",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Digno%20Es%20El%20Cordero.mp3",
                genre: "Alabanza"
            },
            {
                title: "El Poder de la Cruz",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/El%20Poder%20de%20la%20Cruz.mp3",
                genre: "Gospel"
            },
            {
                title: "En La Cruz",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/En%20La%20Cruz.mp3",
                genre: "Himno"
            },
            {
                title: "Getsemani",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Getsemani.mp3",
                genre: "Reflexión"
            },
            {
                title: "Gloria a Dios",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Gloria%20a%20Dios.mp3",
                genre: "Alabanza"
            },
            {
                title: "Grande Es Tu Fidelidad",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Grande%20Es%20Tu%20Fidelidad.mp3",
                genre: "Himno"
            },
            {
                title: "Hay Poder",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Hay%20Poder.mp3",
                genre: "Gospel"
            },
            {
                title: "Himno a la Santísima Trinidad",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Himno%20a%20la%20Sant%C3%ADsima%20Trinidad.mp3",
                genre: "Himno"
            },
            {
                title: "Hosanna",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Hosanna.mp3",
                genre: "Alabanza"
            },
            {
                title: "La Tierra Canta",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/La%20Tierra%20Canta.mp3",
                genre: "Alabanza"
            },
            {
                title: "Mi Vida Esta en Ti",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Mi%20Vida%20Esta%20en%20Ti.mp3",
                genre: "Alabanza"
            },
            {
                title: "No Hay Dios Tan Grande",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/No%20Hay%20Dios%20Tan%20Grande.mp3",
                genre: "Alabanza"
            },
            {
                title: "Padre Nuestro",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Padre%20Nuestro.mp3",
                genre: "Oración"
            },
            {
                title: "Paz en la Tormenta",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Paz%20en%20la%20Tormenta.mp3",
                genre: "Reflexión"
            },
            {
                title: "Puedes Confiar",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Puedes%20Confiar.mp3",
                genre: "Alabanza"
            },
            {
                title: "Renuévame",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Renu%C3%A9vame.mp3",
                genre: "Alabanza"
            },
            {
                title: "Santo Santo Santo",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Santo%20Santo%20Santo.mp3",
                genre: "Himno"
            },
            {
                title: "Te Alabamos Señor",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Te%20Alabamos%20Se%C3%B1or.mp3",
                genre: "Alabanza"
            },
            {
                title: "Tu Fidelidad",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Tu%20Fidelidad.mp3",
                genre: "Alabanza"
            },
            {
                title: "Ven Espíritu Santo",
                url: "https://raw.githubusercontent.com/cl7adv/Voz-del-Shaddai-Online/main/musica/Ven%20Esp%C3%ADritu%20Santo.mp3",
                genre: "Oración"
            }
        ];

        // Variables de estado
        let audioPlayer = new Audio();
        let isPlaying = false;
        let isPoweredOn = false;
        let currentVolume = 0.7;
        let currentSongIndex = -1;
        let shuffledSongs = [];
        
        // Elementos del DOM
        const powerBtn = document.getElementById('powerBtn');
        const playBtn = document.getElementById('playBtn');
        const nextBtn = document.getElementById('nextBtn');
        const volumeSlider = document.getElementById('volumeSlider');
        const currentSongEl = document.getElementById('currentSong');
        const currentGenreEl = document.getElementById('currentGenre');
        const loadingEl = document.getElementById('loading');
        const errorMessageEl = document.getElementById('errorMessage');
        const statusMessageEl = document.getElementById('statusMessage');
        const songListContainer = document.getElementById('songList');
        const progressBar = document.getElementById('progressBar');

        // Función para mezclar canciones aleatoriamente
        function shuffleSongs() {
            shuffledSongs = [...songs];
            for (let i = shuffledSongs.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledSongs[i], shuffledSongs[j]] = [shuffledSongs[j], shuffledSongs[i]];
            }
        }

        // Función para obtener la siguiente canción aleatoria
        function getRandomSong() {
            if (shuffledSongs.length === 0) {
                shuffleSongs();
            }
            
            // Tomar la primera canción de la lista mezclada
            const song = shuffledSongs.shift();
            
            // Si ya no quedan canciones, mezclar de nuevo
            if (shuffledSongs.length === 0) {
                shuffleSongs();
            }
            
            return song;
        }

        // Función para actualizar la lista de canciones en la interfaz
        function updateSongList() {
            songListContainer.innerHTML = '';
            
            songs.forEach((song, index) => {
                const songItem = document.createElement('div');
                songItem.className = 'song-item';
                if (index === currentSongIndex) {
                    songItem.classList.add('active');
                }
                
                songItem.innerHTML = `
                    <i class="fas fa-music" style="margin-right: 10px; color: #ffa502;"></i>
                    ${song.title}
                    <span style="float: right; font-size: 0.8rem; opacity: 0.7;">${song.genre}</span>
                `;
                
                songItem.addEventListener('click', () => {
                    // Encontrar el índice de esta canción en la lista original
                    const songIndex = songs.findIndex(s => s.title === song.title);
                    if (songIndex !== -1) {
                        playSpecificSong(songIndex);
                    }
                });
                
                songListContainer.appendChild(songItem);
            });
        }

        // Función para reproducir una canción específica
        function playSpecificSong(index) {
            currentSongIndex = index;
            playCurrentSong();
        }

        // Función para reproducir la canción actual
        function playCurrentSong() {
            if (!isPoweredOn || songs.length === 0) return;
            
            // Si no hay canción seleccionada, obtener una aleatoria
            if (currentSongIndex === -1 || currentSongIndex >= songs.length) {
                const randomSong = getRandomSong();
                currentSongIndex = songs.findIndex(s => s.title === randomSong.title);
            }
            
            const song = songs[currentSongIndex];
            
            showLoading(`Cargando: ${song.title}...`);
            
            // Detener audio actual
            audioPlayer.pause();
            audioPlayer.currentTime = 0;
            
            // Asignar nueva fuente
            audioPlayer.src = song.url;
            
            // Reproducir
            const playPromise = audioPlayer.play();
            
            if (playPromise !== undefined) {
                playPromise.then(() => {
                    isPlaying = true;
                    playBtn.innerHTML = '<i class="fas fa-pause"></i>';
                    currentSongEl.innerHTML = song.title + ' <span class="playing-indicator"><i class="fas fa-volume-up"></i></span>';
                    currentGenreEl.textContent = song.genre;
                    hideLoading();
                    errorMessageEl.style.display = 'none';
                    statusMessageEl.innerHTML = `<i class="fas fa-random"></i> Reproduciendo en modo aleatorio`;
                    
                    // Actualizar el icono del radio
                    document.querySelector('.radio-icon').style.animation = 'pulse 1s infinite';
                    
                    // Actualizar lista
                    updateSongList();
                })
                .catch(error => {
                    console.error("Error al reproducir:", error);
                    hideLoading();
                    
                    if (error.name === 'NotAllowedError') {
                        errorMessageEl.textContent = "Haz clic en el botón de play para comenzar la reproducción.";
                        errorMessageEl.style.display = 'block';
                    } else if (error.name === 'AbortError') {
                        errorMessageEl.textContent = "Error de carga. Intentando siguiente canción...";
                        errorMessageEl.style.display = 'block';
                        setTimeout(playNextSong, 2000);
                    } else {
                        errorMessageEl.textContent = `Error al cargar "${song.title}". Intentando siguiente canción...`;
                        errorMessageEl.style.display = 'block';
                        setTimeout(playNextSong, 2000);
                    }
                });
            }
        }

        // Función para reproducir siguiente canción
        function playNextSong() {
            if (songs.length === 0) return;
            
            // Obtener una canción aleatoria
            const randomSong = getRandomSong();
            currentSongIndex = songs.findIndex(s => s.title === randomSong.title);
            
            playCurrentSong();
        }

        // Función para mostrar estado de carga
        function showLoading(message) {
            loadingEl.textContent = message;
            loadingEl.style.display = 'block';
            errorMessageEl.style.display = 'none';
        }

        // Función para ocultar estado de carga
        function hideLoading() {
            loadingEl.style.display = 'none';
        }

        // Alternar encendido/apagado
        function togglePower() {
            isPoweredOn = !isPoweredOn;
            
            if (isPoweredOn) {
                powerBtn.classList.add('on');
                playBtn.disabled = false;
                nextBtn.disabled = false;
                playBtn.style.opacity = "1";
                nextBtn.style.opacity = "1";
                
                // Mezclar canciones al encender
                shuffleSongs();
                
                currentSongEl.textContent = "Listo para reproducir";
                currentGenreEl.textContent = `${songs.length} canciones cargadas`;
                statusMessageEl.innerHTML = `<i class="fas fa-check-circle"></i> Emisora encendida - Modo aleatorio activo`;
                
                document.querySelector('.radio-icon').style.animation = 'pulse 1s infinite';
                
                // Actualizar lista
                updateSongList();
            } else {
                powerBtn.classList.remove('on');
                playBtn.disabled = true;
                nextBtn.disabled = true;
                playBtn.style.opacity = "0.6";
                nextBtn.style.opacity = "0.6";
                playBtn.innerHTML = '<i class="fas fa-play"></i>';
                
                if (isPlaying) {
                    audioPlayer.pause();
                    isPlaying = false;
                }
                
                currentSongEl.textContent = "Emisora apagada";
                currentGenreEl.textContent = "-";
                statusMessageEl.innerHTML = `<i class="fas fa-power-off"></i> Emisora apagada`;
                document.querySelector('.radio-icon').style.animation = 'none';
                progressBar.style.width = '0%';
            }
        }

        // Alternar reproducción/pausa
        function togglePlay() {
            if (!isPoweredOn || songs.length === 0) return;
            
            if (!isPlaying) {
                // Si no hay canción seleccionada, obtener una aleatoria
                if (currentSongIndex === -1) {
                    playNextSong();
                } else {
                    playCurrentSong();
                }
            } else {
                audioPlayer.pause();
                isPlaying = false;
                playBtn.innerHTML = '<i class="fas fa-play"></i>';
                currentSongEl.innerHTML = currentSongEl.textContent.replace(' <span class="playing-indicator"><i class="fas fa-volume-up"></i></span>', '');
                document.querySelector('.radio-icon').style.animation = 'pulse 2s infinite';
            }
        }

        // Cambiar volumen
        function changeVolume() {
            currentVolume = volumeSlider.value / 100;
            audioPlayer.volume = currentVolume;
            
            // Cambiar icono según el volumen
            const volumeIcons = document.querySelectorAll('.volume-control i');
            if (currentVolume === 0) {
                volumeIcons[0].className = 'fas fa-volume-mute';
                volumeIcons[1].className = 'fas fa-volume-mute';
            } else if (currentVolume < 0.5) {
                volumeIcons[0].className = 'fas fa-volume-down';
                volumeIcons[1].className = 'fas fa-volume-down';
            } else {
                volumeIcons[0].className = 'fas fa-volume-up';
                volumeIcons[1].className = 'fas fa-volume-up';
            }
        }

        // Actualizar barra de progreso
        function updateProgressBar() {
            if (!audioPlayer.duration || !isPlaying) return;
            
            const progress = (audioPlayer.currentTime / audioPlayer.duration) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // Inicializar eventos
        function initEvents() {
            powerBtn.addEventListener('click', togglePower);
            playBtn.addEventListener('click', togglePlay);
            nextBtn.addEventListener('click', playNextSong);
            volumeSlider.addEventListener('input', changeVolume);
            
            // Configurar audio player
            audioPlayer.volume = currentVolume;
            audioPlayer.addEventListener('ended', playNextSong);
            audioPlayer.addEventListener('timeupdate', updateProgressBar);
            audioPlayer.addEventListener('error', function(e) {
                console.error("Error de audio:", e);
                errorMessageEl.textContent = "Error de audio. Saltando a la siguiente canción...";
                errorMessageEl.style.display = 'block';
                setTimeout(playNextSong, 2000);
            });
            
            // Inicializar canciones
            shuffleSongs();
            updateSongList();
            
            // Mostrar información inicial
            statusMessageEl.innerHTML = `<i class="fas fa-music"></i> ${songs.length} canciones cargadas desde GitHub`;
        }

        // Inicializar la aplicación cuando cargue la página
        window.addEventListener('DOMContentLoaded', initEvents);
    </script>
</body>
</html>
